<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
	<link rel="stylesheet" href="calc.css" type="text/css" media="all" />

	<title>JSCalc - Calculadora em Javascript</title>
	
	<script language="javascript">

	/******************************************************
	* JSCalc, calculadora em Javascript
	*
	* Fork desenvolvido por:
	*	- InFog - Evaldo Junior (http://infog.casoft.info) <junior_pd_bento "@' yahoo . com . br>
	*
	* A JSCalc é baseada na CALC-JS
	* desenvolvida pelo Peterson <peterson770 "@' hotmail . com>
	*
	* A CALC-JS desenvolvida pelo Peterson já tinha
	* um bom mapa de imagem, por isso fiz um fork,
	* para não precisar reinventar a roda e aproveitar
	* o bom trabalho que já estava pronto.
	*
	* Este fork teve início em 21 de setembro de 2008
	*
	* Por que fazer um fork?
	* Quero fazer um visor com os digitos no estilo
	* de calculadoras reais.
	* Outro motivo é deixar um código bem comentado
	* já que a versão original não tinha quase nada
	* para ajudar a entender o código.
	*
	* Este software é licenciado sobre a GPLv3
	* Uma cópia da licença está no arquivo licenca.txt
	* Este software não tem garantias, use por conta e risco.
	*
	* Versão 0.1 - 21/09/2008
	* 	- Versão original e sem modificações.
	* 
	* Versão 0.2 - 21/09/2008
	*	- Adicionados comentários e créditos (antes não tinha nada)
	*	- Adicionada variável com a versão do software.
	*	- Removida a função Mouse(), que mostrava uma mensagem quando usado o botão direito do mouse.
	*	- Removidas variáveis cont, n1, n2, n3, n4 e n5.
	*	- Removidas variáveis numero1, numero2, numero3, numero4, numero 5 e resultado.
	*	- Adicionada variável MEM1, que conterá o que estava no visor antes de usar alguma operação.
	*	- Adicionada variável OPERADOR.
	*	- Alterada a função recebe_tecla() para que trabalhe com switch e não um monte de if aninhado.
	*	- Adicionada a função executa_funcao(), por enquanto ela tem apenas comentários de como deve funcionar.
	*	- Adicionada a função add_ponto() também apenas com comentários.
	*	- Adicionada a função add_operador() também apenas com comentários.
	*	- Removida a verificação do operador na função add_visor().
	*	- Removida a função continhas().
	*	- Removido o site que tinha ao redor da calculador, deixei apenas o código dela, assim fica mais simples
	*	  para embuutila em algum outro site.
	*	- Crei um projeto no google code e hospedei a JSCalc, http://code.google.com/p/jscalc/
	*
	* Versão 0.3 - 22/09/2008
	*	- Removido diretório css e o arquivo de css.
	*	- Criado o diretório imagens para colocar as imagens dos números.
	*	- Movida a imagem calc.jpg para o diretório imagens.
	*	- Arquivo calculadora.html renomeado para jscalc.html.
	*	- Removidas chamadas ao arquivo de css.
	*	- Div mainContent renomeado para principal.
	*	- Percebi que a função recebe_tecla() é inútil e comecei a remove-la.
	*	- Removida a função resultado_final().
	*	- Implementado um beta da função calcula_resultado().
	*	- Alterado o asterisco (*) para x na tecla de multiplcação (dava uns erros com *)
	*	- Adicionada a função botao_on_ac() que limpa as variáveis e o visor.
	*	- Removida a função checa_operando().
	*	- Alterado o título da página para "JSCalc - Calculadora em Javascript".
	*
	* Versão 0.4 - 23/09/2008
	*	- Função recebe_tecla() totalmente eliminada.
	*	- Implementada a função de raiz quadrada.
	*
	* Versão 0.5 - 27/09/2008
	*	- Imagem da calculadora dividida em 3 partes (topo, visor e teclas).
	*	- Adicionada formatação CSS (arquivo calc.css) para que a imagem pareça uma só.
	*	- Mapa de imagem totalmente remodelado para a noma imagem (calc_bottom.jpg).
	*	- JSCalc testada com sucesso no Firefox 3.0.2, Opera 9.51 e Internet Explorer 6.
	*
	* Versão 0.6 - 28/09/2008
	*	- Fiz as imagens dos números 0, 1, 2, 3 e 4.
	*	- Fiz um teste para exibi-los sobre o visor na função atualiza_visor (funcionou).
	* 
	******************************************************/

	var VERSAO = "0.3";
	var VISOR = "0"; // iniciando o visor como 0
	var MEM1 = "0"; // variável que contém o que estava no visor antes de usar uma tecla de operação.
	var OPERADOR = ""; // variável com o operador (+, -, / ou *)	
		
	function executa_funcao(funcao)
	{
		/*******************************************
		* Esta função executa funções da calculadora
		*
		* Funções disponíveis:
		*	- raiz (extrai a raiz do número no visor)
		*******************************************/
		switch (funcao)
		{
			case 'raiz':
				VISOR = eval('Math.sqrt(' + VISOR + ')');
			break;
		}
		atualiza_visor();
	}

	function add_ponto()
	{
		/*******************************************
                * Esta função serve para adicionar um ponto
		* separador de casas decimais ao visor.
                *******************************************/
	}

	function add_operador(oper)
	{
		/*******************************************
                * Esta função adiciona um operador,
		* ela precisa mover o conteúdo do VISOR
		* para MEM1 e aplicar o operador.
		* Ainda não tenho muita ideia de como ela
		* vai funcionar.
                *******************************************/
		MEM1 = VISOR;
		VISOR = "0";
		OPERADOR = oper;
		atualiza_visor();
	}

	function add_visor(valor)
	{

		if (VISOR == "0")
		{
			VISOR = valor;
		}
		else 
		{
			VISOR = VISOR + valor;
		}
		atualiza_visor();			
	}

	function atualiza_visor()
	{
		var display = '<img src="imagens/2.png">';
		document.getElementById('display').innerHTML = display;
	}

	function limpa_visor()
	{
		VISOR = "0";
		atualiza_visor();		
	}

	function botao_on_ac()
	{
		/*********************************
		* Esta função reinicia todas as
		* variáveis e limpa o visor
		*********************************/
		VISOR = "0";
		MEM1 = "0";
		OPERADOR = "";
		limpa_visor();
	}

	function calcula_resultado()
	{
		/*********************************
		* Esta função calcula o resultado
		* esta função ainda é bem beta
		*********************************/
		if (OPERADOR == "x")
			OPERADOR = '*';
		var RESULTADO = eval(MEM1 + OPERADOR + VISOR);
		VISOR = RESULTADO;
		atualiza_visor();
	}
	</script>
</head>
<body>
	<div id="principal">
		<div id="calculadora" name="calculadora">
			<div id="topo">	
			</div><!-- topo -->
			<!-- Este é o DIV do visor da calculadorazinha =] -->
			<div id="visor" name="visor">
				<div id="display">
					<!-- Este div exibe os números -->
				</div><!-- display -->
			</div><!-- visor -->
			<div id="teclas">
				<img src ="imagens/calc_bottom.jpg" usemap="#calcmap"/>
			</div><!-- teclas -->
		</div><!-- calculadora -->
		
		<!-- E este é o mapeamento da calculadora -->
		<map id="calcmap" name="calcmap">
			<area shape ="rect" coords ="44,53,78,77" onclick="executa_funcao('raiz')" /> 
			<area shape ="rect" coords ="44,89,78,113" onclick="add_visor('7')" />
			<area shape ="rect" coords ="44,125,78,149" onclick="add_visor('4')" /> 
			<area shape ="rect" coords ="44,161,78,187" onclick="add_visor('1')"  /> 	
			<area shape ="rect" coords ="44,200,78,222" onclick="add_visor('0')"  />

			<area shape ="rect" coords ="90,53,125,77" onclick="recebe_tecla('%')" />
			<area shape ="rect" coords ="90,89,125,113" onclick="add_visor('8')" />
			<area shape ="rect" coords ="90,125,125,149" onclick="add_visor('5')" />
			<area shape ="rect" coords ="90,161,125,187" onclick="add_visor('2')" />
			<area shape ="rect" coords ="90,200,125,222" onclick="add_ponto('.')"  />

			<area shape ="rect" coords ="138,53,175,77" onclick="recebe_tecla('away')"  />
			<area shape ="rect" coords ="138,89,175,113" onclick="add_visor('9')"  />
			<area shape ="rect" coords ="138,125,175,149" onclick="add_visor('6')"  />
			<area shape ="rect" coords ="138,161,175,187" onclick="add_visor('3')"  />
			<area shape ="rect" coords ="138,200,175,222" onclick="calcula_resultado()" />

			<area shape ="rect" coords ="187,53,223,77" onclick="add_operador('/')"  />
			<area shape ="rect" coords ="187,89,223,113" onclick="add_operador('x')"  />
			<area shape ="rect" coords ="187,125,223,149" onclick="add_operador('-')"  />
			<area shape ="rect" coords ="187,161,223,222" onclick="add_operador('+')"  />

			<area shape ="rect" coords ="152,15,223,43" onclick="botao_on_ac()" />
		</map>
		<span style="font-size: 0.5em;">
		Que a gra&ccedil;a do nosso SENHOR JESUS esteja com todos.
		</span>
	</div><!-- principal -->
	<script language="javascript">
		atualiza_visor();
	</script>
</body>
</html>

